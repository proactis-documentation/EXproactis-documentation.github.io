



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Technical documentation for the PROACTIS suite of products">
      
      
      
        <meta name="author" content="David Betteridge">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../..">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>Internal Invoices - Technical Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.11e41852.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#fb8c00">
      
    
    
      <script src="../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arial:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Arial","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="orange" data-md-color-accent="orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#internal-invoice-gateway" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Technical Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Technical Documentation
              </span>
              <span class="md-header-nav__topic">
                Internal Invoices
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/proactis-documentation/ExampleApplications/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      CodeExamples
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Technical Documentation" class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </a>
    Technical Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/proactis-documentation/ExampleApplications/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      CodeExamples
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../placeholder/" title="Invoice Capture" class="md-nav__link">
      Invoice Capture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../placeholder/" title="Marketplace" class="md-nav__link">
      Marketplace
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      P2P
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        P2P
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../budgetchecking/" title="Budget Checking" class="md-nav__link">
      Budget Checking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commitments/" title="Commitment Posting" class="md-nav__link">
      Commitment Posting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../applicationConfigurationSettings/" title="Application Configuration" class="md-nav__link">
      Application Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../help/" title="Online Help" class="md-nav__link">
      Online Help
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Imaging Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Imaging Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../genericimaging/" title="Generic Imaging" class="md-nav__link">
      Generic Imaging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../customimaging/" title="Custom Imaging" class="md-nav__link">
      Custom Imaging
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../invoicePosting/" title="Invoice Posting" class="md-nav__link">
      Invoice Posting
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6" checked>
    
    <label class="md-nav__link" for="nav-3-6">
      Import APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        Import APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../acceptanceGateway/" title="Acceptances" class="md-nav__link">
      Acceptances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cancelPurhaseOrderGateway/" title="Cancel Purchase Order" class="md-nav__link">
      Cancel Purchase Order
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../expensesGateway/" title="Expenses" class="md-nav__link">
      Expenses
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Internal Invoices
      </label>
    
    <a href="./" title="Internal Invoices" class="md-nav__link md-nav__link--active">
      Internal Invoices
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" title="Summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worked-example" title="Worked Example" class="md-nav__link">
    Worked Example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xml-document" title="XML Document" class="md-nav__link">
    XML Document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-block" title="Control Block" class="md-nav__link">
    Control Block
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-invoice" title="Internal Invoice" class="md-nav__link">
    Internal Invoice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order-items" title="Order Items" class="md-nav__link">
    Order Items
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invoice-items" title="Invoice Items" class="md-nav__link">
    Invoice Items
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comments" title="Comments" class="md-nav__link">
    Comments
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_1" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_2" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" title="Error Handling" class="md-nav__link">
    Error Handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errorserror" title="Errors/Error" class="md-nav__link">
    Errors/Error
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_3" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorhandlingmodes" title="ErrorHandlingModes" class="md-nav__link">
    ErrorHandlingModes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#successful-response" title="Successful Response" class="md-nav__link">
    Successful Response
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-code" title="Example Code" class="md-nav__link">
    Example Code
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../masterData/" title="Master Data" class="md-nav__link">
      Master Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../purchaseCreditNoteGateway/" title="Purchase Credit Notes" class="md-nav__link">
      Purchase Credit Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../purchaseInvoiceGateway/" title="Purchase Invoices" class="md-nav__link">
      Purchase Invoices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../purchaseOrders/" title="Purchase Orders" class="md-nav__link">
      Purchase Orders
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../punchout/" title="PunchOut and Marketplaces" class="md-nav__link">
      PunchOut and Marketplaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nominalvalidation/" title="Nominal Validation" class="md-nav__link">
      Nominal Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sso/" title="Single Sign On (SSO)" class="md-nav__link">
      Single Sign On (SSO)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11" type="checkbox" id="nav-3-11">
    
    <label class="md-nav__link" for="nav-3-11">
      Web site customisation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-11">
        Web site customisation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../addins/" title="Addins" class="md-nav__link">
      Addins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../customtab/" title="Custom Tabs" class="md-nav__link">
      Custom Tabs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Source to Contract
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Source to Contract
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../s2c/srm/" title="Supplier Management" class="md-nav__link">
      Supplier Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../s2c/contracts/" title="Contract Management" class="md-nav__link">
      Contract Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../s2c/sourcing/" title="Sourcing" class="md-nav__link">
      Sourcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../s2c/users/" title="Users" class="md-nav__link">
      Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" title="Summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worked-example" title="Worked Example" class="md-nav__link">
    Worked Example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xml-document" title="XML Document" class="md-nav__link">
    XML Document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-block" title="Control Block" class="md-nav__link">
    Control Block
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-invoice" title="Internal Invoice" class="md-nav__link">
    Internal Invoice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order-items" title="Order Items" class="md-nav__link">
    Order Items
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invoice-items" title="Invoice Items" class="md-nav__link">
    Invoice Items
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comments" title="Comments" class="md-nav__link">
    Comments
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_1" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_2" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" title="Error Handling" class="md-nav__link">
    Error Handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errorserror" title="Errors/Error" class="md-nav__link">
    Errors/Error
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes_3" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorhandlingmodes" title="ErrorHandlingModes" class="md-nav__link">
    ErrorHandlingModes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#successful-response" title="Successful Response" class="md-nav__link">
    Successful Response
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-code" title="Example Code" class="md-nav__link">
    Example Code
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/proactis-documentation/ExampleApplications/edit/master/docs/p2p/internalInvoiceGateway.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="internal-invoice-gateway">Internal Invoice Gateway</h1>
<h2 id="summary">Summary</h2>
<p>This document describes the structure of the XML file used for importing Internal Invoices into PROACTIS.  It is assumed that the reader of the document is familiar both with XML and PROACTIS internal invoicing.</p>
<p>The document also describes the validation rules, which must be passed in order for the internal invoice to be imported, and the current limitations of the invoice matching gateway.</p>
<p>This document should be used in conjunction with the <strong>ImportInternalInvoice.xsd</strong> xml schema.</p>
<hr />
<h2 id="worked-example">Worked Example</h2>
<p>This section of the document walks you through the creation of a simple internal invoice. </p>
<h3 id="xml-document">XML Document</h3>
<p>The xml document must start with the following to lines</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="nt">&lt;pro:Import</span> <span class="na">xmlns:pro=</span><span class="s">&quot;http://www.proactis.com/xml/xml-ns&quot;</span><span class="nt">&gt;</span>
</pre></div>


<p>And finish with</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;/pro:Import&gt;</span>
</pre></div>


<h3 id="control-block">Control Block</h3>
<p>A control block must then be included so that the gateway knows which database and company to import the documents into.  This has the same structure as the control block for the other XML gateways.</p>
<p>An example control block is shown below.</p>
<div class="codehilite"><pre><span></span> <span class="nt">&lt;pro:Control</span> <span class="na">DatabaseName=</span><span class="s">&quot;PROACTIS&quot;</span>
              <span class="na">UserName=</span><span class="s">&quot;DAVIDBETTERIDGE&quot;</span>
              <span class="na">Password=</span><span class="s">&quot;mysecret&quot;</span>
              <span class="na">Company=</span><span class="s">&quot;MAIN&quot;</span>
              <span class="na">Department=</span><span class="s">&quot;SOLUTIONS&quot;</span>
              <span class="na">Version=</span><span class="s">&quot;1.0.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>


<p>The XML gateway supports NT authentication, an example is shown below.</p>
<div class="codehilite"><pre><span></span> <span class="nt">&lt;pro:Control</span>    <span class="na">DatabaseName=</span><span class="s">&quot;PROACTIS\_LIVE&quot;</span>
                 <span class="na">AuthenticationMethod=</span><span class="s">&quot;WINDOWS&quot;</span>
                 <span class="na">Company=</span><span class="s">&quot;MAIN&quot;</span>
                 <span class="na">Department=</span><span class="s">&quot;SOLUTIONS&quot;</span>
                 <span class="na">Version=</span><span class="s">&quot;1.0.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>


<p>NB: The value of the <strong>AuthenticationMethod</strong> field can be WINDOWS or PROACTIS (which must be expressed in Upper Case).  If this field is missing, the gateway will default to PROACTIS and work as before.</p>
<h3 id="internal-invoice">Internal Invoice</h3>
<p>The next section contains the details of the invoices to be imported.  The gateway allows multiple documents to be included in a single xml document.  At least one invoice must be included.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:InternalInvoice&gt;</span>
</pre></div>


<h3 id="order-items">Order Items</h3>
<p>Then the order's items (and item details) to which the internal invoice relates are listed.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:OrderItems</span> <span class="na">OrderNumber=</span><span class="s">&quot;PORD10035&quot;</span><span class="nt">&gt;</span>                 
  <span class="nt">&lt;pro:OrderItem</span> <span class="na">Position=</span><span class="s">&quot;1&quot;</span>
                 <span class="na">Price=</span><span class="s">&quot;7.99&quot;</span>
                 <span class="na">Quantity=</span><span class="s">&quot;5&quot;</span>
                 <span class="na">Description=</span><span class="s">&quot;Test Internal Order Item&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pro:OrderNominals&gt;</span>
      <span class="nt">&lt;pro:OrderNominal</span>    <span class="na">Code=</span><span class="s">&quot;ABC.123&quot;</span>
          <span class="na">Quantity=</span><span class="s">&quot;3&quot;</span>
          <span class="na">Price=</span><span class="s">&quot;7.99&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/pro:OrderNominals&gt;</span>
  <span class="nt">&lt;/pro:OrderItem&gt;</span>
<span class="nt">&lt;/pro:OrderItems&gt;</span>
</pre></div>


<h4 id="notes">Notes</h4>
<ul>
<li>The OrderNumber must relate to an order with an internal supplier,</li>
<li>The Price, Quantity and Description can be used to override the values set on the order.</li>
<li>For DataEntryByValue items, the NetValue should be supplied instead of the Price and Quantity.</li>
<li>The Nominal elements can reallocate the order items to different nominals.</li>
</ul>
<h3 id="invoice-items">Invoice Items</h3>
<p>The invoice items are listed next in a similar format</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:InvoiceItems&gt;</span>                   
  <span class="nt">&lt;pro:InvoiceItem</span> <span class="na">BuyerItemCode=</span><span class="s">&quot;ABC&quot;</span>
                   <span class="na">SupplierItemCode=</span><span class="s">&quot;123&quot;</span>
                   <span class="na">Description=</span><span class="s">&quot;Test Internal Order Item&quot;</span>
                   <span class="na">Quantity=</span><span class="s">&quot;5&quot;</span>
                   <span class="na">Price=</span><span class="s">&quot;7.99&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pro:InvoiceNominals&gt;</span>
      <span class="nt">&lt;pro:InvoiceNominal</span> <span class="na">Code=</span><span class="s">&quot;ABC.123&quot;</span> <span class="na">Value=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/pro:InvoiceNominals&gt;</span>
   <span class="nt">&lt;/pro:InvoiceItem&gt;</span>
<span class="nt">&lt;/pro:InvoiceItems&gt;</span>
</pre></div>


<h3 id="comments">Comments</h3>
<p>It is possible to add one or more comments to an invoice</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:Comments&gt;</span>
  <span class="nt">&lt;pro:Comment&gt;</span>Please pay quickly<span class="nt">&lt;/pro:Comment&gt;</span>
<span class="nt">&lt;/pro:Comments&gt;</span>
</pre></div>


<h4 id="notes_1">Notes</h4>
<ul>
<li>It is not currently possible to view comments from within the PROACTIS website.</li>
</ul>
<h3 id="references">References</h3>
<p>It is also possible to set the reference fields on the invoice</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:References&gt;</span>
          <span class="nt">&lt;pro:Reference</span> <span class="na">Caption=</span><span class="s">&#39;Bar code&#39;</span> 
                         <span class="na">Value=</span><span class="s">&#39;345-223-33&#39;</span>
          <span class="err">&lt;pro:Reference</span> <span class="na">Position=</span><span class="s">&#39;2&#39;</span> 
                         <span class="na">Value=</span><span class="s">&#39;BACS&#39;</span>
          <span class="err">&lt;pro:Reference</span> <span class="na">Code=</span><span class="s">&#39;Colour&#39;</span> 
                         <span class="na">Value=</span><span class="s">&#39;Red&#39;</span>
<span class="err">&lt;/pro:References</span><span class="nt">&gt;</span>
</pre></div>


<h4 id="notes_2">Notes</h4>
<ul>
<li>Any mandatory reference fields without default values must be set.</li>
<li>Either the code, caption or the position can be specified</li>
</ul>
<p>The invoice then finishes with a closing tag:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;/pro:InternalInvoice&gt;</span>
</pre></div>


<p>Finally the XML must be closed as follows:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;/pro:InternalInvoice&gt;</span>
</pre></div>


<hr />
<h2 id="error-handling">Error Handling</h2>
<p>The import routine will return the XML amended to include status and error information.</p>
<p>When a piece of data has been processed, then an extra attribute called status will be added to the node, this will contain the value OK or FAILED.  OK means the invoice was fully imported successfully.  FAILED means the invoice could not be imported. Note: Nodes without this attribute have not been processed.</p>
<p>The supplied XML is first validated against the <strong>ImportInternalInvoices.XSD</strong> schema.  If the invoice fails validation then the details are of the failure are appended to the supplied xml in the form of an errors block.</p>
<p>An example errors block is shown below</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;pro:Errors&gt;</span>
  <span class="nt">&lt;pro:Error</span> <span class="na">Message=</span><span class="s">&#39;XML is not valid according to the schema. Element content is incomplete according to the DTD/Schema. Expecting: {http://www.proactis.com/xml/xml-ns}OrderItems&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/pro:Errors&gt;</span>
</pre></div>


<h3 id="errorserror">Errors/Error</h3>
<table>
<thead>
<tr>
<th>Attribute Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Message</td>
<td>The error message (in English)</td>
</tr>
<tr>
<td>Source</td>
<td>Optional attribute describing where the error occurred.</td>
</tr>
</tbody>
</table>
<h4 id="notes_3">Notes</h4>
<ul>
<li>
<p>The error block may occur anywhere within the document.  For example, if a line is invalid, the errors block will be appended to that line.</p>
</li>
<li>
<p>It is possible for an errors block to contain more than one error.</p>
</li>
</ul>
<h3 id="errorhandlingmodes">ErrorHandlingModes</h3>
<p>The reporting of errors can be configured by setting the <strong>ErrorHandlingMode</strong> attribute within the control block.  The table below describes the available modes</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>EMBED</td>
<td>The processed XML is returned, but we the error message stored in additional <strong>pro:Errors/pro:Error</strong> nodes. This is the default mode if the attribute is not supplied.</td>
</tr>
<tr>
<td>THROWERRORS</td>
<td>The errors are thrown as SOAP exceptions back to the calling code, the message is an xml document describing the errors</td>
</tr>
<tr>
<td>THROWXML</td>
<td>The errors are thrown as SOAP exceptions back to the calling code; the message is the processed xml document, which contains all the errors.</td>
</tr>
<tr>
<td>THROWTEXT</td>
<td>The errors are thrown as OAP exceptions back to the calling code, the message is an human readable text describing the errors.</td>
</tr>
</tbody>
</table>
<h2 id="successful-response">Successful Response</h2>
<p>If a document has been successfully imported, then two new attributes will be added the document's node.</p>
<ol>
<li>The first attribute is Status, and will have a value of OK</li>
<li>The second attribute is DocumentNumber, and this will contain the invoices generated number.</li>
</ol>
<h4 id="note">Note</h4>
<ul>
<li>If the XML contains multiple documents, then as long as the control block is valid, it is possible for some documents to be imported and other to be rejected.</li>
</ul>
<h2 id="example-code">Example Code</h2>
<p>See the following example applications:</p>
<ul>
<li><a href="https://github.com/proactis-documentation/ExampleApplications/tree/master/P2P/Gateways/PROACTIS.ExampleApplication.CreateInternalInvoice">Create Internal Invoice</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../expensesGateway/" title="Expenses" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Expenses
              </span>
            </div>
          </a>
        
        
          <a href="../masterData/" title="Master Data" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Master Data
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; Proactis Ltd - All Rights Reserved
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.905597d0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>